#!/usr/bin/env python

import sys
import argparse
import zhtext

parser = argparse.ArgumentParser(description='Process some integers.')
parser.add_argument('file', metavar='FILE', type=argparse.FileType('r'), help='file to segment')

args = parser.parse_args()
text = args.file.read().decode('utf-8')

text_parts = zhtext.split_hanzi_nonhanzi(text)
dictionary = zhtext.read_dictionary()
frequencies = zhtext.read_frequencies(dictionary, text_parts)

for i, part in enumerate(zhtext.segment(dictionary, frequencies, text_parts)):
    if i % 2 == 0:
        sys.stdout.write(part.encode('utf-8'))
    else:
        sys.stdout.write(' '.join(part).encode('utf-8'))
